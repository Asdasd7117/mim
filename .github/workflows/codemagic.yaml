workflows:
  build_kotlin_app:
    name: Manual Kotlin Build
    max_build_duration: 30
    environment:
      android:
        image: android-31
      vars:
        FIREBASE_TOKEN: your_firebase_token_here
    scripts:
      - name: Build APK
        script: ./gradlew assembleRelease

      - name: Upload to Firebase Storage
        script: |
          curl -X POST -H "Authorization: Bearer $FIREBASE_TOKEN" \
               -F "file=@app/build/outputs/apk/release/app-release.apk" \
               "https://firebasestorage.googleapis.com/v0/b/YOUR_BUCKET/o?uploadType=media&name=app-release.apk"

    artifacts:
      - app/build/outputs/apk/release/app-release.apk
